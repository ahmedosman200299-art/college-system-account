<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* ================= Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØµÙ…ÙŠÙ… (CSS) ================= */
        :root { --dark: #1e293b; --gold: #d97706; --bg: #f1f5f9; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: var(--bg); display: flex; height: 100vh; overflow: hidden; }
        
        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { width: 250px; background: var(--dark); color: white; display: flex; flex-direction: column; flex-shrink: 0; transition: all 0.3s; }
        .sidebar-header { padding: 20px; text-align: center; font-weight: bold; font-size: 1.2rem; border-bottom: 1px solid #334155; color: var(--gold); }
        .nav-item { padding: 15px 20px; cursor: pointer; border-left: 4px solid transparent; transition: 0.2s; }
        .nav-item:hover, .nav-item.active { background: #334155; border-left-color: var(--gold); }
        .nav-footer { margin-top: auto; padding: 20px; border-top: 1px solid #334155; }
        
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content { flex-grow: 1; padding: 30px; overflow-y: auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .card { background: var(--white); border-radius: 10px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 10px; border-right: 5px solid var(--gold); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .stat-card h3 { margin: 0 0 10px 0; color: #64748b; font-size: 0.9rem; }
        .stat-card .value { font-size: 1.8rem; font-weight: bold; color: var(--dark); }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ù†Ù…Ø§Ø°Ø¬ */
        input, select, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #cbd5e1; box-sizing: border-box; }
        button { cursor: pointer; font-weight: bold; transition: 0.2s; border: none; }
        .btn-primary { background: var(--dark); color: white; }
        .btn-accent { background: var(--gold); color: white; }
        .btn-success { background: #10b981; color: white; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid #e2e8f0; }
        th { background: #f8fafc; color: #64748b; }
        .status-badge { padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; }
        .status-ok { background: #dcfce7; color: #166534; }
        .status-wait { background: #fef3c7; color: #92400e; }

        /* Ø´Ø§Ø´Ø§Øª */
        .hidden { display: none !important; }
        #loading { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:999; display:flex; justify-content:center; align-items:center; font-size:1.5rem; }
    </style>
</head>
<body>

    <div id="loading" class="hidden">Ø¬Ø§Ø±Ù Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª... â³</div>

    <div class="sidebar">
        <div class="sidebar-header">Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø§Ù„ØªÙ‚Ø§Ù†ÙŠØ©-ÙƒÙ„ÙŠØ© Ø§Ù„Ø¯Ù…Ø§Ø²ÙŠÙ† ğŸ“</div>
        <div class="nav-item active" onclick="switchTab('dashboard')">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</div>
        <div class="nav-item" onclick="switchTab('registrar')">ğŸ“ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ù„Ø§Ø¨</div>
        <div class="nav-item" onclick="switchTab('finance')">ğŸ’° Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</div>
        <div class="nav-footer">
            <button class="btn-accent" onclick="syncWithGoogle()">ğŸ”„ Ù…Ø²Ø§Ù…Ù†Ø© Google</button>
        </div>
    </div>

    <div class="main-content">
        
        <div id="dashboard" class="tab-content">
            <div class="header">
                <h2>Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h2>
                <span style="color: #64748b;" id="last-update">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ø¢Ù†</span>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</h3>
                    <div class="value" id="stat-total">0</div>
                </div>
                <div class="stat-card" style="border-color: #10b981;">
                    <h3>Ø§Ù„Ù…Ø³Ø¯Ø¯ÙŠÙ† Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</h3>
                    <div class="value" id="stat-paid">0</div>
                </div>
                <div class="stat-card" style="border-color: #ef4444;">
                    <h3>Ø¯ÙŠÙˆÙ† Ù…Ø³ØªØ­Ù‚Ø© (SDG)</h3>
                    <div class="value" id="stat-debt">0</div>
                </div>
            </div>

            <div class="card">
                <h3>ğŸ”” Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
                <ul id="activity-log" style="list-style: none; padding: 0;">
                    <li style="padding: 10px; border-bottom: 1px solid #eee;">Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</li>
                </ul>
            </div>
        </div>

        <div id="registrar" class="tab-content hidden">
            <div class="header"><h2>Ø¥Ø¯Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨</h2></div>
            
            <div class="card" style="background: #f8fafc; border: 1px solid #e2e8f0;">
                <h3>â• ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <input type="text" id="reg-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø¹Ø±Ø¨ÙŠ)">
                    <select id="reg-dept">
                        <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ</option>
                        <option value="1">ØªÙ‚Ø§Ù†Ø© Ù†Ø¸Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (IT)</option>
                        <option value="2">Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© (EE)</option>
                        <option value="3">Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ© (ME)</option>
                    </select>
                    <input type="text" id="reg-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    <input type="number" id="reg-fees" placeholder="Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù‚Ø±Ø±Ø© (SDG)">
                </div>
                <button class="btn-primary" style="margin-top: 10px;" onclick="addStudent()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ</button>
            </div>

            <div class="card">
                <h3>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ù‚Ø³Ù…</th>
                            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                        </tr>
                    </thead>
                    <tbody id="students-table-body">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="finance" class="tab-content hidden">
            <div class="header"><h2>Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ</h2></div>
            <div class="card">
                <h3>Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</h3>
                <input type="text" id="search-finance" placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ..." onkeyup="filterFinanceTable()">
                <table>
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³ÙˆÙ…</th>
                            <th>Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>
                            <th>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>
                            <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
                        </tr>
                    </thead>
                    <tbody id="finance-table-body">
                        </tbody>
                </table>
            </div>
        </div>

    </div>

<script>
    // ============================================================
    // âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ (ÙŠØ¬Ø¨ ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©)
    // ============================================================
    const SUPABASE_URL = 'https://jhsrbevgsguikxnuhjso.supabase.co'; // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
    const SUPABASE_KEY = 'sb_publishable_zRmzYh8hHThgZ57L3xYvvA_gToeURIn'; // Ø¶Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù…
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbweMohtxboBn0DXfgVxoc2NQErboK3knBrT49_x1MfvvI14mg3SBhyEJnxrj_Daxiw3/exec'; // Ø±Ø§Ø¨Ø· Ø³ÙƒØ±Ø¨Øª Ø¬ÙˆØ¬Ù„

    // ØªÙ‡ÙŠØ¦Ø© Supabase
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
    let allStudents = [];
    const departmentsMap = { 1: "Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª", 2: "Ù‡Ù†Ø¯Ø³Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©", 3: "Ù‡Ù†Ø¯Ø³Ø© Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ©" };

    // ============================================================
    // ğŸš€ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    // ============================================================
    
    // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.onload = async function() {
        await fetchStudents();
    };

    // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Supabase
    async function fetchStudents() {
        showLoading(true);
        try {
            // Ù†Ø·Ù„Ø¨ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆÙ†Ø·Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ù‡Ù… (Join)
            const { data, error } = await supabaseClient
                .from('students')
                .select(`
                    *,
                    departments ( name_ar )
                `)
                .order('created_at', { ascending: false });

            if (error) throw error;
            
            allStudents = data;
            renderAll();
            updateStats();
        } catch (err) {
            console.error(err);
            alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: " + err.message);
        } finally {
            showLoading(false);
        }
    }

    // ============================================================
    // ğŸ“ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø¬Ù„ (Registrar)
    // ============================================================

    async function addStudent() {
        const name = document.getElementById('reg-name').value;
        const deptId = document.getElementById('reg-dept').value;
        const phone = document.getElementById('reg-phone').value;
        const fees = document.getElementById('reg-fees').value;

        if (!name || !deptId || !fees) {
            alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù‚Ø³Ù…ØŒ Ø§Ù„Ø±Ø³ÙˆÙ…)");
            return;
        }

        showLoading(true);
        try {
            // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù„Ø§Ø­Ø¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©)
            const { data, error } = await supabaseClient
                .from('students')
                .insert([{
                    full_name_ar: name,
                    department_id: parseInt(deptId),
                    phone: phone,
                    total_fees: parseFloat(fees),
                    paid_fees: 0,
                    status: 'Ù…Ø¨Ø¯Ø¦ÙŠ'
                }])
                .select(); // Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© (Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨)

            if (error) throw error;

            alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„ÙƒÙˆØ¯: " + data[0].student_code);
            
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('reg-name').value = '';
            document.getElementById('reg-fees').value = '';
            await fetchStudents();

        } catch (err) {
            alert("ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + err.message);
        } finally {
            showLoading(false);
        }
    }

    // ============================================================
    // ğŸ’° ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø§Ù„ÙŠØ© (Finance)
    // ============================================================

    async function makePayment(studentId, currentPaid) {
        const amount = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø¯Ø§Ø¯Ù‡ (SDG):");
        if (!amount) return;

        showLoading(true);
        try {
            // 1. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª (Ù„Ù„ØªÙˆØ«ÙŠÙ‚)
            const { error: payError } = await supabaseClient
                .from('payments')
                .insert({
                    student_id: studentId,
                    amount: parseFloat(amount),
                    status: 'Ù…Ø¤ÙƒØ¯'
                });
            
            if (payError) throw payError;

            // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ØªØ±ÙŠØ¬Ø± ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ÙŠÙ‚ÙˆÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨
            // Ù„ÙƒÙ† Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø³Ù†Ø­Ø¯Ø« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
            await fetchStudents();
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ…");

        } catch (err) {
            alert("Ø®Ø·Ø£ Ù…Ø§Ù„ÙŠ: " + err.message);
        } finally {
            showLoading(false);
        }
    }

    // ============================================================
    // ğŸ–¥ï¸ Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¹Ø±Ø¶ (Rendering)
    // ============================================================

    function renderAll() {
        const regTable = document.getElementById('students-table-body');
        const finTable = document.getElementById('finance-table-body');
        
        regTable.innerHTML = '';
        finTable.innerHTML = '';

        allStudents.forEach(student => {
            const deptName = student.departments ? student.departments.name_ar : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            
            // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¬Ù„
            regTable.innerHTML += `
                <tr>
                    <td><b>${student.student_code || 'ØªØ­Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©'}</b></td>
                    <td>${student.full_name_ar}</td>
                    <td>${deptName}</td>
                    <td>${new Date(student.created_at).toLocaleDateString('ar-EG')}</td>
                </tr>
            `;

            // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            const remaining = student.total_fees - student.paid_fees;
            const statusClass = remaining <= 0 ? 'status-ok' : 'status-wait';
            const statusText = remaining <= 0 ? 'Ø®Ø§Ù„Øµ' : 'Ø¹Ù„ÙŠÙ‡ Ù…ØªØ£Ø®Ø±Ø§Øª';

            finTable.innerHTML += `
                <tr>
                    <td>${student.full_name_ar}<br><small style="color:#aaa">${student.student_code}</small></td>
                    <td>${student.total_fees.toLocaleString()}</td>
                    <td style="color:green">${student.paid_fees.toLocaleString()}</td>
                    <td style="color:red; font-weight:bold">${remaining.toLocaleString()}</td>
                    <td>
                        ${remaining > 0 ? 
                        `<button class="btn-success" style="padding:5px 10px; width:auto" onclick="makePayment(${student.id})">Ø³Ø¯Ø§Ø¯</button>` 
                        : '<span class="status-badge status-ok">Ù…ÙƒØªÙ…Ù„</span>'}
                    </td>
                </tr>
            `;
        });
    }

    function updateStats() {
        document.getElementById('stat-total').innerText = allStudents.length;
        
        const fullyPaid = allStudents.filter(s => (s.total_fees - s.paid_fees) <= 0).length;
        document.getElementById('stat-paid').innerText = fullyPaid;

        const totalDebt = allStudents.reduce((sum, s) => sum + (s.total_fees - s.paid_fees), 0);
        document.getElementById('stat-debt').innerText = totalDebt.toLocaleString();
    }

    // ============================================================
    // ğŸ”§ Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
    // ============================================================

    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        
        document.getElementById(tabId).classList.remove('hidden');
        // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø²Ø± Ø§Ù„Ù†Ø´Ø· (ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹)
    }

    function showLoading(show) {
        const loader = document.getElementById('loading');
        if(show) loader.classList.remove('hidden');
        else loader.classList.add('hidden');
    }

    function filterFinanceTable() {
        const query = document.getElementById('search-finance').value.toLowerCase();
        const rows = document.querySelectorAll('#finance-table-body tr');
        rows.forEach(row => {
            const text = row.innerText.toLowerCase();
            row.style.display = text.includes(query) ? '' : 'none';
        });
    }

    async function syncWithGoogle() {
        if(confirm("Ù‡Ù„ ØªÙˆØ¯ ÙØªØ­ Google Sheet Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")) {
            // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø´ÙŠØª Ù…Ø¨Ø§Ø´Ø±Ø©
            window.open('YOUR_GOOGLE_SHEETS_LINK_HERE', '_blank');
        }
    }

</script>
</body>
</html>

